<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANTI RUB - –°—Ç–µ–π–∫—ñ–Ω–≥ ARUB —Ç–∞ USDT</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%231a3a52'/><text x='50' y='60' font-size='50' text-anchor='middle' fill='white' font-weight='bold'>‚Ç¥</text></svg>">
    
    <!-- Ethers.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <!-- Chart.js for graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    
    <style>
        :root {
            --primary: #3b82f6;
            --secondary: #2563eb;
            --accent: #60a5fa;
            --dark: #0a0e1a;
            --gray: #9ca3af;
            --light-gray: #374151;
            --border: #1f2937;
            --bg-card: #111827;
            --bg-secondary: #1f2937;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, sans-serif;
            background: var(--dark);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }
        
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 45px;
            height: 45px;
            background: var(--primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6em;
            font-weight: 600;
            color: white;
        }
        
        .logo-text {
            font-size: 1.5em;
            font-weight: 600;
            color: var(--primary);
            letter-spacing: -0.5px;
        }
        
        .nav-right {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .lang-switcher {
            display: flex;
            gap: 5px;
            background: var(--bg-secondary);
            border-radius: 6px;
            padding: 4px;
        }
        
        .lang-btn {
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9em;
            font-weight: 500;
        }
        
        .lang-btn.active {
            background: var(--bg-card);
            color: var(--primary);
            box-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        .connect-btn {
            padding: 10px 24px;
            background: var(--primary);
            border: none;
            border-radius: 6px;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95em;
        }
        
        .connect-btn:hover {
            background: var(--secondary);
        }
        
        .hero {
            padding: 140px 50px 80px;
            text-align: center;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
        }
        
        .hero-title {
            font-size: 3em;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary);
            line-height: 1.2;
            letter-spacing: -1px;
        }
        
        .hero-subtitle {
            font-size: 1.2em;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 400;
        }
        
        .hero-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn-primary {
            padding: 14px 32px;
            background: var(--primary);
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary:hover {
            background: var(--secondary);
        }
        
        .btn-secondary {
            padding: 14px 32px;
            background: var(--bg-secondary);
            border: 1px solid var(--primary);
            border-radius: 6px;
            color: var(--primary);
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-secondary:hover {
            background: var(--light-gray);
        }
        
        .stats-bar {
            background: var(--bg-card);
            padding: 30px 50px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 30px;
            border-bottom: 1px solid var(--border);
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.95em;
            color: var(--text-secondary);
            font-weight: 400;
        }
        
        .section {
            padding: 80px 50px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .section-title {
            font-size: 2.2em;
            font-weight: 600;
            text-align: center;
            margin-bottom: 15px;
            color: var(--primary);
            letter-spacing: -0.5px;
        }
        
        .section-subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 50px;
            font-size: 1.1em;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }
        
        .feature-card {
            background: var(--bg-card);
            padding: 35px;
            border-radius: 8px;
            border: 1px solid var(--border);
            transition: all 0.2s;
        }
        
        .feature-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            border-color: var(--primary);
        }
        
        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .feature-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
        }
        
        .feature-text {
            color: var(--text-secondary);
            line-height: 1.7;
        }
        
        .staking-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 40px;
            max-width: 600px;
            margin: 50px auto;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-primary);
            font-weight: 500;
            font-size: 0.95em;
        }
        
        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .token-input {
            width: 100%;
            padding: 12px 80px 12px 15px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 1.1em;
            font-weight: 500;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        
        .token-input:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--bg-card);
        }
        
        .max-btn {
            position: absolute;
            right: 10px;
            padding: 6px 14px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-primary);
            font-weight: 500;
            cursor: pointer;
            font-size: 0.85em;
        }
        
        .max-btn:hover {
            background: var(--light-gray);
        }
        
        .balance-info {
            margin-top: 8px;
            color: var(--text-secondary);
            font-size: 0.9em;
        }
        
        .stake-btn {
            width: 100%;
            padding: 14px;
            background: var(--primary);
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 1.05em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 10px;
        }
        
        .stake-btn:hover {
            background: var(--secondary);
        }
        
        .stake-btn:disabled {
            background: var(--bg-secondary);
            color: var(--gray);
            cursor: not-allowed;
        }
        
        .info-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 20px;
            margin-top: 25px;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .info-row:last-child {
            border-bottom: none;
        }
        
        .info-label {
            color: var(--text-secondary);
            font-size: 0.95em;
        }
        
        .info-value {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .dashboard-section {
            background: var(--dark);
            padding: 60px 50px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .dashboard-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 30px;
        }
        
        .dashboard-label {
            color: var(--text-secondary);
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }
        
        .dashboard-value {
            font-size: 2em;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .dashboard-subvalue {
            color: var(--text-secondary);
            font-size: 0.95em;
        }
        
        .chart-container {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 30px;
            margin-top: 25px;
            height: 300px;
        }
        
        .chart-title {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
        }
        
        footer {
            background: var(--bg-card);
            color: var(--text-primary);
            padding: 40px 50px;
            text-align: center;
            border-top: 1px solid var(--border);
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            transition: opacity 0.2s;
            font-size: 0.95em;
        }
        
        .footer-link:hover {
            opacity: 0.8;
            color: var(--primary);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: var(--bg-card);
            margin: 10% auto;
            padding: 40px;
            border-radius: 8px;
            max-width: 500px;
            position: relative;
        }
        
        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: 300;
            color: var(--text-secondary);
            cursor: pointer;
        }
        
        .close:hover {
            color: var(--text-primary);
        }
        
        .wallet-option {
            padding: 18px;
            border: 1px solid var(--border);
            border-radius: 6px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 15px;
            background: var(--bg-secondary);
        }
        
        .wallet-option:hover {
            border-color: var(--primary);
            background: var(--light-gray);
        }
        
        .wallet-icon {
            font-size: 1.8em;
        }
        
        .wallet-name {
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .status-message {
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            text-align: center;
            font-size: 0.95em;
        }
        
        .status-success {
            background: rgba(16, 185, 129, 0.15);
            color: #6ee7b7;
            border: 1px solid rgba(110, 231, 183, 0.3);
        }
        
        .status-error {
            background: rgba(239, 68, 68, 0.15);
            color: #fca5a5;
            border: 1px solid rgba(252, 165, 165, 0.3);
        }
        
        .status-warning {
            background: rgba(245, 158, 11, 0.15);
            color: #fde68a;
            border: 1px solid rgba(253, 230, 138, 0.3);
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            nav {
                padding: 15px 20px;
            }
            
            .hero {
                padding: 100px 20px 60px;
            }
            
            .hero-title {
                font-size: 2em;
            }
            
            .section {
                padding: 60px 20px;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-bar {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="logo">
            <div class="logo-icon">‚Ç¥</div>
            <div class="logo-text">ANTI RUB</div>
        </div>
        <div class="nav-right">
            <div class="lang-switcher">
                <button class="lang-btn active" data-lang="uk">UA</button>
                <button class="lang-btn" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="ru">RU</button>
            </div>
            <button class="connect-btn" id="connectWallet">–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <h1 class="hero-title">–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å—Ç–µ–π–∫—ñ–Ω–≥—É</h1>
        <p class="hero-subtitle">–û—Ç—Ä–∏–º—É–π—Ç–µ —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π –¥–æ—Ö—ñ–¥ –≤—ñ–¥ —Å—Ç–µ–π–∫—ñ–Ω–≥—É ARUB —Ç–∞ USDT –∑ –ø—Ä–æ–∑–æ—Ä–∏–º–∏ —É–º–æ–≤–∞–º–∏ —Ç–∞ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ—é –±–µ–∑–ø–µ–∫–æ—é</p>
        <div class="hero-buttons">
            <button class="btn-primary" onclick="document.getElementById('staking').scrollIntoView({behavior:'smooth'})">–ü–æ—á–∞—Ç–∏ —Å—Ç–µ–π–∫—ñ–Ω–≥</button>
            <button class="btn-secondary" onclick="document.getElementById('about').scrollIntoView({behavior:'smooth'})">–î—ñ–∑–Ω–∞—Ç–∏—Å—è –±—ñ–ª—å—à–µ</button>
        </div>
    </section>

    <!-- Stats Bar -->
    <div class="stats-bar">
        <div class="stat-item">
            <div class="stat-value" id="dashHeroPrice">-</div>
            <div class="stat-label">–¶—ñ–Ω–∞ ARUB</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="dashHeroApy">24%</div>
            <div class="stat-label">–†—ñ—á–Ω–∞ —Å—Ç–∞–≤–∫–∞</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="dashHeroStakers">-</div>
            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω–∏—Ö —ñ–Ω–≤–µ—Å—Ç–æ—Ä—ñ–≤</div>
        </div>
    </div>

    <!-- Features Section -->
    <section class="section" id="about">
        <h2 class="section-title">–ß–æ–º—É –æ–±–∏—Ä–∞—é—Ç—å –Ω–∞—Å</h2>
        <p class="section-subtitle">–ù–∞–¥—ñ–π–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–º–∏ –ø–æ–∫–∞–∑–Ω–∏–∫–∞–º–∏</p>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üîí</div>
                <h3 class="feature-title">–ì–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∞ –±–µ–∑–ø–µ–∫–∞</h3>
                <p class="feature-text">–ê—É–¥–∏—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤ –ø—Ä–æ–≤—ñ–¥–Ω–∏–º–∏ –∫–æ–º–ø–∞–Ω—ñ—è–º–∏. –í–∞—à—ñ –∞–∫—Ç–∏–≤–∏ –ø—ñ–¥ –Ω–∞–¥—ñ–π–Ω–∏–º –∑–∞—Ö–∏—Å—Ç–æ–º.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h3 class="feature-title">–ü—Ä–æ–∑–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                <p class="feature-text">–ü–æ–≤–Ω–∞ –∑–≤—ñ—Ç–Ω—ñ—Å—Ç—å –≤ —Ä–µ–∂–∏–º—ñ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É. –í—ñ–¥—Å—Ç–µ–∂—É–π—Ç–µ –≤—Å—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ –Ω–∞ –±–ª–æ–∫—á–µ–π–Ω—ñ.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">üí∞</div>
                <h3 class="feature-title">–°—Ç–∞–±—ñ–ª—å–Ω–∏–π –¥–æ—Ö—ñ–¥</h3>
                <p class="feature-text">–§—ñ–∫—Å–æ–≤–∞–Ω–∞ —Ä—ñ—á–Ω–∞ —Å—Ç–∞–≤–∫–∞ 24%. –û—Ç—Ä–∏–º—É–π—Ç–µ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∏ —â–æ–¥–Ω—è –±–µ–∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏—Ö –∫–æ–º—ñ—Å—ñ–π.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3 class="feature-title">–®–≤–∏–¥–∫—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó</h3>
                <p class="feature-text">–ú–∏—Ç—Ç—î–≤–∏–π —Å—Ç–µ–π–∫—ñ–Ω–≥ —Ç–∞ –≤–∏–≤–µ–¥–µ–Ω–Ω—è –∫–æ—à—Ç—ñ–≤ –Ω–∞ Ethereum Sepolia Network.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">üåê</div>
                <h3 class="feature-title">–î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å 24/7</h3>
                <p class="feature-text">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø—Ä–∞—Ü—é—î —Ü—ñ–ª–æ–¥–æ–±–æ–≤–æ –±–µ–∑ –≤–∏—Ö—ñ–¥–Ω–∏—Ö. –ö–µ—Ä—É–π—Ç–µ –∞–∫—Ç–∏–≤–∞–º–∏ –≤ –±—É–¥—å-—è–∫–∏–π —á–∞—Å.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">üíº</div>
                <h3 class="feature-title">–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞</h3>
                <p class="feature-text">–ö–æ–º–∞–Ω–¥–∞ –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ –≥–æ—Ç–æ–≤–∞ –¥–æ–ø–æ–º–æ–≥—Ç–∏ –≤–∞–º –Ω–∞ –∫–æ–∂–Ω–æ–º—É –µ—Ç–∞–ø—ñ —ñ–Ω–≤–µ—Å—Ç—É–≤–∞–Ω–Ω—è.</p>
            </div>
        </div>
    </section>

    <!-- Staking Section -->
    <section class="section" id="staking">
        <h2 class="section-title">–°—Ç–µ–π–∫—ñ–Ω–≥</h2>
        <p class="section-subtitle">–ü–æ—á–Ω—ñ—Ç—å –∑–∞—Ä–æ–±–ª—è—Ç–∏ –≤–∂–µ —Å—å–æ–≥–æ–¥–Ω—ñ</p>
        
        <div class="staking-section">
            <div id="notConnectedView">
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 20px;">
                    –î–ª—è –ø–æ—á–∞—Ç–∫—É —Ä–æ–±–æ—Ç–∏ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å –∫—Ä–∏–ø—Ç–æ–≥–∞–º–∞–Ω–µ—Ü—å
                </p>
                <button class="stake-btn" onclick="document.getElementById('connectWallet').click()">
                    –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å
                </button>
            </div>
            
            <div id="connectedView" class="hidden">
                <!-- Stake Tab -->
                <div id="stakeTab">
                    <div class="input-group">
                        <label class="input-label">–°—É–º–∞ –¥–ª—è —Å—Ç–µ–π–∫—ñ–Ω–≥—É</label>
                        <div class="input-wrapper">
                            <input type="number" class="token-input" id="stakeAmount" placeholder="0.00" min="0" step="0.01">
                            <button class="max-btn" onclick="setMaxStake()">MAX</button>
                        </div>
                        <div class="balance-info">
                            –ë–∞–ª–∞–Ω—Å: <span id="arubBalance">0</span> ARUB
                        </div>
                    </div>
                    
                    <div class="info-card">
                        <div class="info-row">
                            <span class="info-label">–†—ñ—á–Ω–∞ —Å—Ç–∞–≤–∫–∞ (APY)</span>
                            <span class="info-value">24%</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">–ü—Ä–æ–≥–Ω–æ–∑ –¥–æ—Ö–æ–¥—É (—Ä—ñ–∫)</span>
                            <span class="info-value" id="projectedEarnings">0 ARUB</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">–©–æ–¥–µ–Ω–Ω–∞ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∞</span>
                            <span class="info-value" id="dailyEarnings">0 ARUB</span>
                        </div>
                    </div>
                    
                    <button class="stake-btn" id="approveBtn" onclick="approveTokens()">
                        –î–æ–∑–≤–æ–ª–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
                    </button>
                    <button class="stake-btn hidden" id="stakeBtn" onclick="stakeTokens()">
                        –ó–∞—Å—Ç–µ–π–∫–∞—Ç–∏ ARUB
                    </button>
                    
                    <div id="stakeStatus"></div>
                </div>
                
                <!-- User Stats -->
                <div class="info-card" style="margin-top: 40px;">
                    <h3 style="margin-bottom: 15px; color: var(--primary); font-size: 1.1em;">–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="info-row">
                        <span class="info-label">–ó–∞—Å—Ç–µ–π–∫–∞–Ω–æ</span>
                        <span class="info-value" id="userStaked">0 ARUB</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">–î–æ—Å—Ç—É–ø–Ω—ñ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∏</span>
                        <span class="info-value" id="userRewards">0 ARUB</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">–í—Å—å–æ–≥–æ –∑–∞—Ä–æ–±–ª–µ–Ω–æ</span>
                        <span class="info-value" id="userTotalEarned">0 ARUB</span>
                    </div>
                    
                    <button class="stake-btn" onclick="claimRewards()" style="margin-top: 20px;">
                        –í–∏–≤–µ—Å—Ç–∏ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∏
                    </button>
                    <button class="stake-btn" onclick="unstakeTokens()" style="margin-top: 10px; background: var(--text-secondary);">
                        –ó–Ω—è—Ç–∏ –∑—ñ —Å—Ç–µ–π–∫—ñ–Ω–≥—É
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section class="dashboard-section" id="dashboard">
        <h2 class="section-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏</h2>
        <p class="section-subtitle" id="dashLoadingText">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...</p>
        
        <div class="dashboard-grid" id="dashStatsGrid" style="display: none;">
            <div class="dashboard-card">
                <div class="dashboard-label">–ó–∞–≥–∞–ª—å–Ω–∏–π TVL</div>
                <div class="dashboard-value" id="dashTotalStakedUsd">$0</div>
                <div class="dashboard-subvalue" id="dashTotalStakedTokens">0 ARUB</div>
            </div>
            
            <div class="dashboard-card">
                <div class="dashboard-label">–ï–º—ñ—Å—ñ—è —Ç–æ–∫–µ–Ω—ñ–≤</div>
                <div class="dashboard-value" id="dashTotalSupplyTokens">0 ARUB</div>
                <div class="dashboard-subvalue" id="dashTotalSupplyUsd">$0</div>
            </div>
            
            <div class="dashboard-card">
                <div class="dashboard-label">–¶—ñ–Ω–∞ —Ç–æ–∫–µ–Ω–∞</div>
                <div class="dashboard-value" id="dashPriceUsd">$0</div>
                <div class="dashboard-subvalue" id="dashPriceSourceBadge">-</div>
            </div>
            
            <div class="dashboard-card">
                <div class="dashboard-label">–ö—ñ–ª—å–∫—ñ—Å—Ç—å —ñ–Ω–≤–µ—Å—Ç–æ—Ä—ñ–≤</div>
                <div class="dashboard-value" id="dashStakersCount">0</div>
                <div class="dashboard-subvalue">–ê–∫—Ç–∏–≤–Ω–∏—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤</div>
            </div>
        </div>
        
        <div style="max-width: 1400px; margin: 50px auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 25px;">
            <div class="chart-container">
                <div class="chart-title">–î–∏–Ω–∞–º—ñ–∫–∞ TVL</div>
                <canvas id="dashStakedChart"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">–Ü—Å—Ç–æ—Ä—ñ—è —Ü—ñ–Ω–∏ ARUB</div>
                <canvas id="dashPriceChart"></canvas>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#" class="footer-link">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è</a>
                <a href="#" class="footer-link">–£–º–æ–≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è</a>
                <a href="#" class="footer-link">–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ</a>
                <a href="#" class="footer-link">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞</a>
            </div>
            <p style="margin-top: 20px; opacity: 0.8; font-size: 0.9em;">
                ¬© 2025 ANTI RUB. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.
            </p>
        </div>
    </footer>

    <!-- Wallet Modal -->
    <div id="walletModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeWalletModal()">&times;</span>
            <h2 style="margin-bottom: 25px; color: var(--primary);">–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å</h2>
            <div class="wallet-option" onclick="connectMetaMask()">
                <div class="wallet-icon">ü¶ä</div>
                <div class="wallet-name">MetaMask</div>
            </div>
            <div class="wallet-option" onclick="connectWalletConnect()">
                <div class="wallet-icon">üîó</div>
                <div class="wallet-name">WalletConnect</div>
            </div>
        </div>
    </div>

    <script>
      // Contracts configuration
      const ARUB_ADDRESS = "0x64e06532d4e522FCf7Dc94C4e9D36e5c79ACb58D";
      const STAKING_ADDRESS = "0xa65BBCDa1d06Cd09F59E6aAa9cbe6BB5fE7ef346";
      const RPC_URLS = [
        "https://ethereum-sepolia-rpc.publicnode.com",
        "https://rpc.sepolia.org",
        "https://1rpc.io/sepolia"
      ];
      const TOKEN_DECIMALS = 6;
      const FIXED_APY = 24;

      let provider = null;
      let signer = null;
      let userAddress = null;
      let arubContract = null;
      let stakingContract = null;

      // ABIs
      const ARUB_ABI = [
        "function balanceOf(address) view returns (uint256)",
        "function approve(address spender, uint256 amount) returns (bool)",
        "function allowance(address owner, address spender) view returns (uint256)",
        "function totalSupply() view returns (uint256)"
      ];

      const STAKING_ABI = [
        "function stake(uint256 amount)",
        "function unstake(uint256 amount)",
        "function claimRewards()",
        "function getStakeInfo(address user) view returns (uint256 stakedAmount, uint256 pendingRewards, uint256 totalEarned, uint256 lastStakeTime)",
        "function totalStaked() view returns (uint256)",
        "function getPoolStats() view returns (uint256 totalStaked_, uint256 totalStakers_, uint256 totalRewardsDistributed_, uint256 currentAPY_, uint256 totalStakes_, uint256 totalUnstakes_, uint256 totalClaims_)"
      ];

      // Connect wallet
      document.getElementById('connectWallet').addEventListener('click', () => {
        document.getElementById('walletModal').style.display = 'block';
      });

      function closeWalletModal() {
        document.getElementById('walletModal').style.display = 'none';
      }

      async function connectMetaMask() {
        try {
          if (!window.ethereum) {
            showStatus('stakeStatus', '–ë—É–¥—å –ª–∞—Å–∫–∞, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å MetaMask', 'error');
            return;
          }

          await window.ethereum.request({ method: 'eth_requestAccounts' });
          provider = new ethers.providers.Web3Provider(window.ethereum);
          signer = provider.getSigner();
          userAddress = await signer.getAddress();

          arubContract = new ethers.Contract(ARUB_ADDRESS, ARUB_ABI, signer);
          stakingContract = new ethers.Contract(STAKING_ADDRESS, STAKING_ABI, signer);

          document.getElementById('connectWallet').textContent = userAddress.slice(0, 6) + '...' + userAddress.slice(-4);
          document.getElementById('notConnectedView').classList.add('hidden');
          document.getElementById('connectedView').classList.remove('hidden');

          closeWalletModal();
          await updateUserStats();
        } catch (error) {
          console.error(error);
          showStatus('stakeStatus', '–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: ' + error.message, 'error');
        }
      }

      async function connectWalletConnect() {
        showStatus('stakeStatus', 'WalletConnect –±—É–¥–µ –¥–æ–¥–∞–Ω–æ –Ω–µ–∑–∞–±–∞—Ä–æ–º', 'warning');
      }

      // Update user stats
      async function updateUserStats() {
        try {
          const balance = await arubContract.balanceOf(userAddress);
          const balanceFormatted = ethers.utils.formatUnits(balance, TOKEN_DECIMALS);
          document.getElementById('arubBalance').textContent = parseFloat(balanceFormatted).toFixed(2);

          const stakeInfo = await stakingContract.getStakeInfo(userAddress);
          const stakedAmount = ethers.utils.formatUnits(stakeInfo[0], TOKEN_DECIMALS);
          const pendingRewards = ethers.utils.formatUnits(stakeInfo[1], TOKEN_DECIMALS);
          const totalEarned = ethers.utils.formatUnits(stakeInfo[2], TOKEN_DECIMALS);

          document.getElementById('userStaked').textContent = parseFloat(stakedAmount).toFixed(2) + ' ARUB';
          document.getElementById('userRewards').textContent = parseFloat(pendingRewards).toFixed(4) + ' ARUB';
          document.getElementById('userTotalEarned').textContent = parseFloat(totalEarned).toFixed(4) + ' ARUB';
        } catch (error) {
          console.error('Error updating user stats:', error);
        }
      }

      // Calculate earnings
      document.getElementById('stakeAmount').addEventListener('input', (e) => {
        const amount = parseFloat(e.target.value) || 0;
        const yearlyEarnings = amount * (FIXED_APY / 100);
        const dailyEarnings = yearlyEarnings / 365;
        
        document.getElementById('projectedEarnings').textContent = yearlyEarnings.toFixed(2) + ' ARUB';
        document.getElementById('dailyEarnings').textContent = dailyEarnings.toFixed(4) + ' ARUB';
      });

      function setMaxStake() {
        const balance = document.getElementById('arubBalance').textContent;
        document.getElementById('stakeAmount').value = balance;
        document.getElementById('stakeAmount').dispatchEvent(new Event('input'));
      }

      // Approve tokens
      async function approveTokens() {
        try {
          const amount = document.getElementById('stakeAmount').value;
          if (!amount || amount <= 0) {
            showStatus('stakeStatus', '–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É', 'warning');
            return;
          }

          const amountWei = ethers.utils.parseUnits(amount, TOKEN_DECIMALS);
          const tx = await arubContract.approve(STAKING_ADDRESS, amountWei);
          
          showStatus('stakeStatus', '–û—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó...', 'warning');
          await tx.wait();
          
          showStatus('stakeStatus', '–î–æ–∑–≤—ñ–ª –æ—Ç—Ä–∏–º–∞–Ω–æ! –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ —Å—Ç–µ–π–∫–∞—Ç–∏', 'success');
          document.getElementById('approveBtn').classList.add('hidden');
          document.getElementById('stakeBtn').classList.remove('hidden');
        } catch (error) {
          console.error(error);
          showStatus('stakeStatus', '–ü–æ–º–∏–ª–∫–∞: ' + error.message, 'error');
        }
      }

      // Stake tokens
      async function stakeTokens() {
        try {
          const amount = document.getElementById('stakeAmount').value;
          if (!amount || amount <= 0) {
            showStatus('stakeStatus', '–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É', 'warning');
            return;
          }

          const amountWei = ethers.utils.parseUnits(amount, TOKEN_DECIMALS);
          const tx = await stakingContract.stake(amountWei);
          
          showStatus('stakeStatus', '–û–±—Ä–æ–±–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó...', 'warning');
          await tx.wait();
          
          showStatus('stakeStatus', '–£—Å–ø—ñ—à–Ω–æ –∑–∞—Å—Ç–µ–π–∫–∞–Ω–æ!', 'success');
          document.getElementById('stakeAmount').value = '';
          await updateUserStats();
        } catch (error) {
          console.error(error);
          showStatus('stakeStatus', '–ü–æ–º–∏–ª–∫–∞: ' + error.message, 'error');
        }
      }

      // Claim rewards
      async function claimRewards() {
        try {
          const tx = await stakingContract.claimRewards();
          showStatus('stakeStatus', '–û–±—Ä–æ–±–∫–∞ –≤–∏–≤–µ–¥–µ–Ω–Ω—è...', 'warning');
          await tx.wait();
          showStatus('stakeStatus', '–í–∏–Ω–∞–≥–æ—Ä–æ–¥–∏ –æ—Ç—Ä–∏–º–∞–Ω–æ!', 'success');
          await updateUserStats();
        } catch (error) {
          console.error(error);
          showStatus('stakeStatus', '–ü–æ–º–∏–ª–∫–∞: ' + error.message, 'error');
        }
      }

      // Unstake tokens
      async function unstakeTokens() {
        try {
          const staked = document.getElementById('userStaked').textContent;
          const amount = parseFloat(staked);
          
          if (amount <= 0) {
            showStatus('stakeStatus', '–ù–µ–º–∞—î –∑–∞—Å—Ç–µ–π–∫–∞–Ω–∏—Ö —Ç–æ–∫–µ–Ω—ñ–≤', 'warning');
            return;
          }

          const amountWei = ethers.utils.parseUnits(amount.toString(), TOKEN_DECIMALS);
          const tx = await stakingContract.unstake(amountWei);
          
          showStatus('stakeStatus', '–û–±—Ä–æ–±–∫–∞ –∑–Ω—è—Ç—Ç—è...', 'warning');
          await tx.wait();
          
          showStatus('stakeStatus', '–¢–æ–∫–µ–Ω–∏ –∑–Ω—è—Ç–æ –∑—ñ —Å—Ç–µ–π–∫—ñ–Ω–≥—É!', 'success');
          await updateUserStats();
        } catch (error) {
          console.error(error);
          showStatus('stakeStatus', '–ü–æ–º–∏–ª–∫–∞: ' + error.message, 'error');
        }
      }

      function showStatus(elementId, message, type) {
        const statusEl = document.getElementById(elementId);
        statusEl.innerHTML = `<div class="status-message status-${type}">${message}</div>`;
        setTimeout(() => {
          if (type === 'success' || type === 'error') {
            statusEl.innerHTML = '';
          }
        }, 5000);
      }

      // Dashboard logic
      let stakedChart = null;
      let priceChart = null;
      const labels = [];
      const stakedHistory = [];
      const priceHistory = [];

      function hexToBigInt(hex) {
        if (!hex || hex === "0x") return 0n;
        return BigInt(hex);
      }

      function bigIntToFloat(bi, decimals) {
        return Number(bi) / Math.pow(10, decimals);
      }

      async function rpcCall(to, data) {
        for (const url of RPC_URLS) {
          try {
            const res = await fetch(url, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                jsonrpc: "2.0",
                id: 1,
                method: "eth_call",
                params: [{ to, data }, "latest"]
              })
            });
            const json = await res.json();
            if (json.result) return json.result;
          } catch (e) {
            console.warn("[dashboard rpc]", url, e.message);
          }
        }
        throw new Error("–£—Å—ñ RPC-–Ω–æ–¥–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ");
      }

      async function getPriceFromDexScreener() {
        const url = "https://api.dexscreener.com/latest/dex/tokens/" + ARUB_ADDRESS;
        const res = await fetch(url);
        if (!res.ok) throw new Error("DexScreener HTTP " + res.status);
        const data = await res.json();
        if (data && data.pairs && data.pairs.length > 0) {
          const pair = data.pairs[0];
          if (pair.priceUsd) return parseFloat(pair.priceUsd);
        }
        throw new Error("DexScreener: no priceUsd");
      }

      async function getPriceFromFX() {
        const res = await fetch("https://api.exchangerate-api.com/v4/latest/USD");
        if (!res.ok) throw new Error("FX HTTP " + res.status);
        const data = await res.json();
        if (data && data.rates && data.rates.RUB) {
          return data.rates.RUB;
        }
        throw new Error("FX: no RUB rate");
      }

      function updateCharts(label, stakedUsd, priceUsd) {
        if (!window.Chart) return;
        labels.push(label);
        stakedHistory.push(stakedUsd);
        priceHistory.push(priceUsd);
        if (labels.length > 50) {
          labels.shift();
          stakedHistory.shift();
          priceHistory.shift();
        }

        const stakedCtx = document.getElementById("dashStakedChart");
        const priceCtx = document.getElementById("dashPriceChart");
        if (!stakedCtx || !priceCtx) return;

        if (!stakedChart) {
          stakedChart = new Chart(stakedCtx.getContext("2d"), {
            type: "line",
            data: {
              labels,
              datasets: [{
                label: "TVL, USD",
                data: stakedHistory,
                fill: true,
                borderColor: '#3b82f6',
                backgroundColor: 'rgba(59, 130, 246, 0.2)',
                tension: 0.4
              }]
            },
            options: {
              plugins: { 
                legend: { display: false }
              },
              scales: {
                x: { 
                  display: false 
                },
                y: {
                  ticks: {
                    callback: v => "$" + v.toLocaleString("en-US"),
                    color: '#9ca3af'
                  },
                  grid: {
                    color: 'rgba(255, 255, 255, 0.1)'
                  }
                }
              }
            }
          });
        } else {
          stakedChart.data.labels = labels;
          stakedChart.data.datasets[0].data = stakedHistory;
          stakedChart.update("none");
        }

        if (!priceChart) {
          priceChart = new Chart(priceCtx.getContext("2d"), {
            type: "line",
            data: {
              labels,
              datasets: [{
                label: "–¶—ñ–Ω–∞ ARUB, USD",
                data: priceHistory,
                fill: false,
                borderColor: '#60a5fa',
                tension: 0.4
              }]
            },
            options: {
              plugins: { 
                legend: { display: false }
              },
              scales: {
                x: { 
                  display: false 
                },
                y: {
                  ticks: {
                    callback: v => "$" + v.toFixed(3),
                    color: '#9ca3af'
                  },
                  grid: {
                    color: 'rgba(255, 255, 255, 0.1)'
                  }
                }
              }
            }
          });
        } else {
          priceChart.data.labels = labels;
          priceChart.data.datasets[0].data = priceHistory;
          priceChart.update("none");
        }
      }

      async function loadDashboardStats() {
        const loadingEl = document.getElementById("dashLoadingText");
        const gridEl = document.getElementById("dashStatsGrid");
        if (!loadingEl || !gridEl) return;

        loadingEl.textContent = "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ –±–ª–æ–∫—á–µ–π–Ω—É...";

        try {
          let priceUsd;
          let priceSource = "DexScreener";
          try {
            priceUsd = await getPriceFromDexScreener();
          } catch (eDex) {
            console.warn("[dashboard] DexScreener error:", eDex.message);
            priceUsd = await getPriceFromFX();
            priceSource = "FX USD/RUB";
          }

          const totalStakedHex = await rpcCall(STAKING_ADDRESS, "0x817b1cd2");
          const totalSupplyHex = await rpcCall(ARUB_ADDRESS, "0x18160ddd");

          const stakedBI = hexToBigInt(totalStakedHex);
          const supplyBI = hexToBigInt(totalSupplyHex);
          const stakedTokens = bigIntToFloat(stakedBI, TOKEN_DECIMALS);
          const supplyTokens = bigIntToFloat(supplyBI, TOKEN_DECIMALS);
          const stakedUsd = stakedTokens * priceUsd;
          const supplyUsd = supplyTokens * priceUsd;

          let stakersCountText = "N/A";
          try {
            const viewProvider = new ethers.providers.JsonRpcProvider(RPC_URLS[0]);
            const STAKING_ABI_VIEW = [
              "function getPoolStats() view returns (uint256 totalStaked_,uint256 totalStakers_,uint256 totalRewardsDistributed_,uint256 currentAPY_,uint256 totalStakes_,uint256 totalUnstakes_,uint256 totalClaims_)"
            ];
            const stakingView = new ethers.Contract(STAKING_ADDRESS, STAKING_ABI_VIEW, viewProvider);
            const pool = await stakingView.getPoolStats();
            const totalStakers = pool.totalStakers_ || pool[1];
            stakersCountText = Number(totalStakers).toLocaleString("en-US");
          } catch (ePool) {
            console.warn("[dashboard] getPoolStats error:", ePool.message);
          }

          const setText = (id, text) => {
            const el = document.getElementById(id);
            if (el) el.textContent = text;
          };

          setText("dashTotalStakedUsd",
            "$" + stakedUsd.toLocaleString("en-US", { maximumFractionDigits: 0 }));
          setText("dashTotalStakedTokens",
            stakedTokens.toLocaleString("en-US", { maximumFractionDigits: 2 }) + " ARUB");

          setText("dashTotalSupplyTokens",
            supplyTokens.toLocaleString("en-US", { maximumFractionDigits: 0 }) + " ARUB");
          setText("dashTotalSupplyUsd",
            "$" + supplyUsd.toLocaleString("en-US", { maximumFractionDigits: 0 }));

          setText("dashStakersCount", stakersCountText);
          setText("dashHeroStakers", stakersCountText);

          setText("dashPriceUsd", "$" + priceUsd.toFixed(4));
          setText("dashHeroPrice", "$" + priceUsd.toFixed(2));

          setText("dashPriceSourceBadge", "–î–∂–µ—Ä–µ–ª–æ: " + priceSource);

          setText("dashHeroApy", FIXED_APY + "%");

          const now = new Date();
          const label = now.toLocaleTimeString("uk-UA", {
            hour: "2-digit",
            minute: "2-digit",
            second: "2-digit"
          });
          updateCharts(label, stakedUsd, priceUsd);

          loadingEl.textContent = "–î–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–æ";
          gridEl.style.display = "grid";
        } catch (e) {
          console.error("[dashboard] loadDashboardStats error:", e);
          loadingEl.textContent = "–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: " + (e.message || e);
        }
      }

      document.addEventListener("DOMContentLoaded", function() {
        loadDashboardStats();
        setInterval(loadDashboardStats, 30000);
      });
    </script>
</body>
</html>
