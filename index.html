<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARUB Staking - V2 SEPOLIA</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%234a90e2'/><text x='50' y='65' font-size='40' text-anchor='middle' fill='white' font-weight='bold'>A</text></svg>">
    
    <!-- Ethers.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1f3a 0%, #0f1628 100%);
            color: #e0e6ed;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4a90e2, #357abd);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
        }
        
        .logo-text h1 {
            font-size: 24px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 2px;
        }
        
        .logo-badge {
            display: inline-block;
            background: rgba(74, 144, 226, 0.2);
            border: 1px solid #4a90e2;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            color: #4a90e2;
            margin-left: 8px;
            text-transform: uppercase;
            font-weight: 600;
        }
        
        .subtitle {
            font-size: 14px;
            color: #8b94a8;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .network-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid rgba(16, 185, 129, 0.3);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            color: #10b981;
        }
        
        .network-dot {
            width: 6px;
            height: 6px;
            background: #10b981;
            border-radius: 50%;
        }
        
        .connect-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #4a90e2, #357abd);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .connect-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(74, 144, 226, 0.4);
        }
        
        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tab {
            padding: 12px 20px;
            background: none;
            border: none;
            color: #8b94a8;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: #4a90e2;
            border-bottom-color: #4a90e2;
        }
        
        .tab:hover {
            color: #fff;
        }
        
        /* Pool Cards */
        .pools {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .pool-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
        }
        
        .pool-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .pool-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .pool-title h3 {
            font-size: 20px;
            font-weight: 600;
            color: #fff;
        }
        
        .pool-type {
            background: rgba(139, 148, 168, 0.2);
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            color: #8b94a8;
            text-transform: uppercase;
            font-weight: 600;
        }
        
        .apy-badge {
            background: rgba(245, 158, 11, 0.15);
            border: 1px solid rgba(245, 158, 11, 0.3);
            padding: 6px 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .apy-badge span {
            font-size: 12px;
            color: #f59e0b;
            font-weight: 600;
        }
        
        .pool-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-label {
            font-size: 12px;
            color: #8b94a8;
            margin-bottom: 4px;
        }
        
        .stat-value {
            font-size: 16px;
            font-weight: 600;
            color: #fff;
        }
        
        .stat-subvalue {
            font-size: 11px;
            color: #8b94a8;
            margin-top: 2px;
        }
        
        /* Staking Form */
        .stake-section {
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 13px;
            color: #8b94a8;
            margin-bottom: 12px;
            font-weight: 500;
        }
        
        .stake-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .stake-input-group {
            position: relative;
        }
        
        .stake-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .stake-input:focus {
            outline: none;
            border-color: #4a90e2;
        }
        
        .stake-input::placeholder {
            color: #5a6375;
        }
        
        .stake-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #4a90e2, #357abd);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .stake-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 15px rgba(74, 144, 226, 0.3);
        }
        
        .unstake-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .unstake-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            box-shadow: none;
        }
        
        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .info-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
        }
        
        .info-card h3 {
            font-size: 16px;
            color: #fff;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .info-item {
            margin-bottom: 12px;
        }
        
        .info-item:last-child {
            margin-bottom: 0;
        }
        
        .info-label {
            font-size: 12px;
            color: #8b94a8;
            margin-bottom: 4px;
        }
        
        .info-value {
            font-size: 13px;
            color: #4a90e2;
            font-family: 'Courier New', monospace;
            word-break: break-all;
        }
        
        .info-note {
            margin-top: 12px;
            padding: 10px;
            background: rgba(74, 144, 226, 0.1);
            border-left: 3px solid #4a90e2;
            border-radius: 4px;
            font-size: 11px;
            color: #8b94a8;
            line-height: 1.5;
        }
        
        /* Statistics */
        .statistics {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
        }
        
        .statistics h2 {
            font-size: 18px;
            color: #fff;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        
        .stat-card {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }
        
        .stat-card-label {
            font-size: 12px;
            color: #8b94a8;
            margin-bottom: 8px;
        }
        
        .stat-card-value {
            font-size: 24px;
            font-weight: 600;
            color: #fff;
        }
        
        /* Status Messages */
        .status-message {
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
            font-size: 13px;
            display: none;
        }
        
        .status-message.show {
            display: block;
        }
        
        .status-success {
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #10b981;
        }
        
        .status-error {
            background: rgba(239, 68, 68, 0.15);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
        }
        
        .status-warning {
            background: rgba(245, 158, 11, 0.15);
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: #f59e0b;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 640px) {
            .pool-stats {
                grid-template-columns: 1fr;
            }
            
            .stake-actions {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Hidden state */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <div class="logo-icon">A</div>
                <div class="logo-text">
                    <h1>
                        ARUB Staking
                        <span class="logo-badge">V2 - SEPOLIA</span>
                    </h1>
                    <div class="subtitle">
                        –ü—Ä–æ—Å—Ç–∏–π —Å—Ç–µ–π–∫—ñ–Ω–≥ ARUB / USDT –¥–ª—è —Ç–µ—Å—Ç–∞ –ª–æ–≥—ñ–∫–∏.
                        <span class="network-badge">
                            <span class="network-dot"></span>
                            Sepolia testnet
                        </span>
                    </div>
                </div>
            </div>
            <button class="connect-btn" id="connectBtn">–ü—ñ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫</button>
        </header>
        
        <!-- Main Content -->
        <div class="main-layout">
            <!-- Left Side - Pools -->
            <div class="pools-section">
                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab active">üìä –û–±–∑–æ—Ä</button>
                    <button class="tab">üíº –ú–æ—è –ø–æ–∑–∏—Ü–∏—è</button>
                    <button class="tab">‚ùì FAQ / Help</button>
                </div>
                
                <!-- Pools -->
                <div class="pools">
                    <!-- USDT Pool -->
                    <div class="pool-card">
                        <div class="pool-header">
                            <div class="pool-title">
                                <h3>USDT –ø—É–ª</h3>
                                <span class="pool-type">MOCK</span>
                            </div>
                            <div class="apy-badge">
                                üî• <span>APY: ‚Äî%</span>
                            </div>
                        </div>
                        
                        <div class="pool-stats">
                            <div class="stat-item">
                                <div class="stat-label">–ó–∞—Å—Ç–µ–π–∫–∞–Ω–æ</div>
                                <div class="stat-value" id="usdtStaked">‚Äî USDT</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">–°—Ç–µ–π–∫–µ—Ä–æ–≤</div>
                                <div class="stat-value" id="usdtStakers">‚Äî</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">–ú—ñ–Ω. —Å—Ç–µ–π–∫</div>
                                <div class="stat-value">‚Äî USDT</div>
                            </div>
                        </div>
                        
                        <div class="stake-section">
                            <div class="section-title">–ú–æ–π —Å—Ç–µ–π–∫</div>
                            <div class="stat-value" style="margin-bottom: 15px;" id="myUsdtStake">‚Äî USDT</div>
                            
                            <div class="stake-actions">
                                <div class="stake-input-group">
                                    <input type="number" class="stake-input" id="usdtStakeAmount" placeholder="–°—É–º–º–∞ USDT" min="0" step="0.01">
                                    <button class="stake-btn" id="usdtStakeBtn">
                                        <span style="margin-right: 4px;">stake</span> Stake
                                    </button>
                                </div>
                                <div class="stake-input-group">
                                    <input type="number" class="stake-input" id="usdtUnstakeAmount" placeholder="–°—É–º–º–∞ USDT" min="0" step="0.01">
                                    <button class="stake-btn unstake-btn" id="usdtUnstakeBtn">
                                        <span style="margin-right: 4px;">unstake</span> Unstake
                                    </button>
                                </div>
                            </div>
                            <div id="usdtStatus" class="status-message"></div>
                        </div>
                    </div>
                    
                    <!-- ARUB Pool -->
                    <div class="pool-card">
                        <div class="pool-header">
                            <div class="pool-title">
                                <h3>ARUB –ø—É–ª</h3>
                                <span class="pool-type">NATIVE</span>
                            </div>
                            <div class="apy-badge">
                                üî• <span>APY: ‚Äî%</span>
                            </div>
                        </div>
                        
                        <div class="pool-stats">
                            <div class="stat-item">
                                <div class="stat-label">–ó–∞—Å—Ç–µ–π–∫–∞–Ω–æ</div>
                                <div class="stat-value" id="arubStaked">‚Äî ARUB</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">–°—Ç–µ–π–∫–µ—Ä–æ–≤</div>
                                <div class="stat-value" id="arubStakers">‚Äî</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">–ú—ñ–Ω. —Å—Ç–µ–π–∫</div>
                                <div class="stat-value">‚Äî ARUB</div>
                            </div>
                        </div>
                        
                        <div class="stake-section">
                            <div class="section-title">–ú–æ–π —Å—Ç–µ–π–∫</div>
                            <div class="stat-value" style="margin-bottom: 15px;" id="myArubStake">‚Äî ARUB</div>
                            
                            <div class="stake-actions">
                                <div class="stake-input-group">
                                    <input type="number" class="stake-input" id="arubStakeAmount" placeholder="–°—É–º–º–∞ ARUB" min="0" step="0.01">
                                    <button class="stake-btn" id="arubStakeBtn">
                                        <span style="margin-right: 4px;">stake</span> Stake
                                    </button>
                                </div>
                                <div class="stake-input-group">
                                    <input type="number" class="stake-input" id="arubUnstakeAmount" placeholder="–°—É–º–º–∞ ARUB" min="0" step="0.01">
                                    <button class="stake-btn unstake-btn" id="arubUnstakeBtn">
                                        <span style="margin-right: 4px;">unstake</span> Unstake
                                    </button>
                                </div>
                            </div>
                            <div id="arubStatus" class="status-message"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Side - Info -->
            <div class="sidebar">
                <div class="info-card">
                    <h3>–°–≤–æ–¥–∫–∞ –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É</h3>
                    <div class="info-item">
                        <div class="info-label">–°—Ç–µ–π–∫—ñ–Ω–≥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç</div>
                        <div class="info-value" id="stakingContract">0x75A9...53fCf</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">USDT (mock)</div>
                        <div class="info-value" id="usdtContract">0x30E0...85012</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ARUB —Ç–æ–∫–µ–Ω</div>
                        <div class="info-value" id="arubContract">0x98Ff...4788</div>
                    </div>
                    <div class="info-note">
                        –≠—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å Sepolia testnet. –í –±–æ—é –ø–æ–¥–º–µ–Ω–∏—à—å –∞–¥—Ä–µ—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, API –∫–ª—é—á–∏ RPC.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Statistics -->
        <div class="statistics">
            <h2>–†–∞–∑–æ–º –ø–æ —Å—Ç–µ–π–∫—ñ–Ω–≥—É</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-card-label">–í—Å–µ–≥–æ —Å—Ç–µ–π–∫–µ—Ä–æ–≤</div>
                    <div class="stat-card-value" id="totalStakers">‚Äî</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-label">–ù–∞–≥—Ä–∞–¥–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–æ</div>
                    <div class="stat-card-value" id="totalRewards">‚Äî</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-label">–¢–µ–∫—É—â–∏–π APY</div>
                    <div class="stat-card-value" id="currentAPY">‚Äî%</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            STAKING_ADDRESS: "0x75A953fCf9F8849654F0c984D9C08dc9B9531191",
            USDT_ADDRESS: "0x30E085012f81f94a6480E89073cfeE34E7E4e858",
            ARUB_ADDRESS: "0x98fFc1A4Ff6eAD8EebFd02cDA54852Bb69744788",
            CHAIN_ID: 11155111, // Sepolia
            RPC_URL: "https://ethereum-sepolia-rpc.publicnode.com"
        };
        
        // State
        let provider = null;
        let signer = null;
        let userAddress = null;
        let stakingContract = null;
        let usdtContract = null;
        let arubContract = null;
        
        // ABIs
        const ERC20_ABI = [
            "function balanceOf(address) view returns (uint256)",
            "function approve(address spender, uint256 amount) returns (bool)",
            "function allowance(address owner, address spender) view returns (uint256)"
        ];
        
        const STAKING_ABI = [
            "function stake(uint256 amount) external",
            "function unstake(uint256 amount) external",
            "function getStakeInfo(address user) view returns (uint256 stakedAmount, uint256 pendingRewards, uint256 totalEarned, uint256 lastStakeTime)",
            "function totalStaked() view returns (uint256)",
            "function getPoolStats() view returns (uint256 totalStaked_, uint256 totalStakers_, uint256 totalRewardsDistributed_, uint256 currentAPY_, uint256 totalStakes_, uint256 totalUnstakes_, uint256 totalClaims_)"
        ];
        
        // Connect Wallet
        async function connectWallet() {
            try {
                if (!window.ethereum) {
                    showStatus('arubStatus', '–ë—É–¥—å –ª–∞—Å–∫–∞, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å MetaMask', 'error');
                    return;
                }
                
                await window.ethereum.request({ method: 'eth_requestAccounts' });
                provider = new ethers.providers.Web3Provider(window.ethereum);
                const network = await provider.getNetwork();
                
                if (network.chainId !== CONFIG.CHAIN_ID) {
                    showStatus('arubStatus', '–ü–µ—Ä–µ–º–∫–Ω—ñ—Ç—å—Å—è –Ω–∞ Sepolia Testnet', 'warning');
                    try {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: '0x' + CONFIG.CHAIN_ID.toString(16) }],
                        });
                    } catch (switchError) {
                        showStatus('arubStatus', '–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—ñ –º–µ—Ä–µ–∂—ñ', 'error');
                        return;
                    }
                }
                
                signer = provider.getSigner();
                userAddress = await signer.getAddress();
                
                stakingContract = new ethers.Contract(CONFIG.STAKING_ADDRESS, STAKING_ABI, signer);
                usdtContract = new ethers.Contract(CONFIG.USDT_ADDRESS, ERC20_ABI, signer);
                arubContract = new ethers.Contract(CONFIG.ARUB_ADDRESS, ERC20_ABI, signer);
                
                document.getElementById('connectBtn').textContent = 
                    userAddress.slice(0, 6) + '...' + userAddress.slice(-4);
                document.getElementById('connectBtn').style.background = 'rgba(16, 185, 129, 0.2)';
                document.getElementById('connectBtn').style.border = '1px solid rgba(16, 185, 129, 0.3)';
                
                showStatus('arubStatus', '–ì–∞–º–∞–Ω–µ—Ü—å –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!', 'success');
                
                await loadContractInfo();
                await loadUserData();
                await loadPoolStats();
                
            } catch (error) {
                console.error(error);
                showStatus('arubStatus', '–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: ' + error.message, 'error');
            }
        }
        
        // Load Contract Info
        async function loadContractInfo() {
            document.getElementById('stakingContract').textContent = 
                CONFIG.STAKING_ADDRESS.slice(0, 6) + '...' + CONFIG.STAKING_ADDRESS.slice(-5);
            document.getElementById('usdtContract').textContent = 
                CONFIG.USDT_ADDRESS.slice(0, 6) + '...' + CONFIG.USDT_ADDRESS.slice(-5);
            document.getElementById('arubContract').textContent = 
                CONFIG.ARUB_ADDRESS.slice(0, 6) + '...' + CONFIG.ARUB_ADDRESS.slice(-4);
        }
        
        // Load User Data
        async function loadUserData() {
            try {
                // USDT stake info - placeholder as USDT pool might not be active
                document.getElementById('myUsdtStake').textContent = '0 USDT';
                
                // ARUB stake info
                const stakeInfo = await stakingContract.getStakeInfo(userAddress);
                const stakedAmount = ethers.utils.formatUnits(stakeInfo[0], 6);
                document.getElementById('myArubStake').textContent = 
                    parseFloat(stakedAmount).toFixed(2) + ' ARUB';
                
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }
        
        // Load Pool Stats
        async function loadPoolStats() {
            try {
                const poolStats = await stakingContract.getPoolStats();
                const totalStakers = poolStats[1].toString();
                const totalRewards = ethers.utils.formatUnits(poolStats[2], 6);
                const currentAPY = poolStats[3].toString();
                
                document.getElementById('totalStakers').textContent = totalStakers;
                document.getElementById('totalRewards').textContent = 
                    parseFloat(totalRewards).toFixed(0);
                document.getElementById('currentAPY').textContent = currentAPY + '%';
                
                // Pool specific stats
                const totalStaked = await stakingContract.totalStaked();
                const stakedAmount = ethers.utils.formatUnits(totalStaked, 6);
                document.getElementById('arubStaked').textContent = 
                    parseFloat(stakedAmount).toFixed(0) + ' ARUB';
                document.getElementById('arubStakers').textContent = totalStakers;
                
            } catch (error) {
                console.error('Error loading pool stats:', error);
            }
        }
        
        // Stake ARUB
        async function stakeARUB() {
            const amount = document.getElementById('arubStakeAmount').value;
            if (!amount || amount <= 0) {
                showStatus('arubStatus', '–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É', 'warning');
                return;
            }
            
            try {
                showStatus('arubStatus', '–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ–∑–≤–æ–ª—É...', 'warning');
                
                const amountWei = ethers.utils.parseUnits(amount, 6);
                const allowance = await arubContract.allowance(userAddress, CONFIG.STAKING_ADDRESS);
                
                if (allowance.lt(amountWei)) {
                    showStatus('arubStatus', '–ù–∞–¥–∞–Ω–Ω—è –¥–æ–∑–≤–æ–ª—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É...', 'warning');
                    const approveTx = await arubContract.approve(CONFIG.STAKING_ADDRESS, amountWei);
                    await approveTx.wait();
                }
                
                showStatus('arubStatus', '–°—Ç–µ–π–∫—ñ–Ω–≥...', 'warning');
                const tx = await stakingContract.stake(amountWei);
                await tx.wait();
                
                showStatus('arubStatus', '–£—Å–ø—ñ—à–Ω–æ –∑–∞—Å—Ç–µ–π–∫–∞–Ω–æ!', 'success');
                document.getElementById('arubStakeAmount').value = '';
                
                await loadUserData();
                await loadPoolStats();
                
            } catch (error) {
                console.error(error);
                showStatus('arubStatus', '–ü–æ–º–∏–ª–∫–∞: ' + error.message, 'error');
            }
        }
        
        // Unstake ARUB
        async function unstakeARUB() {
            const amount = document.getElementById('arubUnstakeAmount').value;
            if (!amount || amount <= 0) {
                showStatus('arubStatus', '–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É', 'warning');
                return;
            }
            
            try {
                showStatus('arubStatus', '–í–∏–≤–µ–¥–µ–Ω–Ω—è...', 'warning');
                
                const amountWei = ethers.utils.parseUnits(amount, 6);
                const tx = await stakingContract.unstake(amountWei);
                await tx.wait();
                
                showStatus('arubStatus', '–£—Å–ø—ñ—à–Ω–æ –≤–∏–≤–µ–¥–µ–Ω–æ!', 'success');
                document.getElementById('arubUnstakeAmount').value = '';
                
                await loadUserData();
                await loadPoolStats();
                
            } catch (error) {
                console.error(error);
                showStatus('arubStatus', '–ü–æ–º–∏–ª–∫–∞: ' + error.message, 'error');
            }
        }
        
        // Show Status Message
        function showStatus(elementId, message, type) {
            const statusEl = document.getElementById(elementId);
            statusEl.textContent = message;
            statusEl.className = `status-message status-${type} show`;
            
            if (type === 'success' || type === 'error') {
                setTimeout(() => {
                    statusEl.classList.remove('show');
                }, 5000);
            }
        }
        
        // Event Listeners
        document.getElementById('connectBtn').addEventListener('click', connectWallet);
        document.getElementById('arubStakeBtn').addEventListener('click', stakeARUB);
        document.getElementById('arubUnstakeBtn').addEventListener('click', unstakeARUB);
        
        // USDT buttons (placeholder)
        document.getElementById('usdtStakeBtn').addEventListener('click', () => {
            showStatus('usdtStatus', 'USDT –ø—É–ª —â–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∏–π', 'warning');
        });
        document.getElementById('usdtUnstakeBtn').addEventListener('click', () => {
            showStatus('usdtStatus', 'USDT –ø—É–ª —â–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∏–π', 'warning');
        });
        
        // Initial load
        window.addEventListener('DOMContentLoaded', () => {
            console.log('ARUB Staking initialized');
        });
    </script>
</body>
</html>
