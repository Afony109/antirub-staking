<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Check - ANTI RUB</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0a0a0a;
            color: white;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
        }
        .result {
            background: rgba(0,87,183,0.1);
            border: 2px solid #0057b7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .success {
            border-color: #10b981;
            background: rgba(16,185,129,0.1);
        }
        .error {
            border-color: #ef4444;
            background: rgba(239,68,68,0.1);
        }
        button {
            background: linear-gradient(45deg, #0057b7, #ffd700);
            border: none;
            color: white;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            transform: translateY(-2px);
        }
        a {
            color: #ffd700;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>‚ö° –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É</h1>
    <p>–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–µ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π - —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ RPC API</p>

    <div>
        <button onclick="checkContract()">üîç –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç</button>
        <button onclick="openEtherscan()">üìä Etherscan</button>
    </div>

    <div id="results"></div>

    <script>
        const CONFIG = {
            STAKING_ADDRESS: '0x47B302F223ae94e9efcABc27DE19C0a2eC268Df3'
        };

        function log(message, type = 'info') {
            const resultsDiv = document.getElementById('results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `result ${type}`;
            resultDiv.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong><br>${message}`;
            resultsDiv.insertBefore(resultDiv, resultsDiv.firstChild);
        }

        function openEtherscan() {
            const url = `https://sepolia.etherscan.io/address/${CONFIG.STAKING_ADDRESS}`;
            window.open(url, '_blank');
            log('üîó –í—ñ–¥–∫—Ä–∏—Ç–æ Etherscan –≤ –Ω–æ–≤—ñ–π –≤–∫–ª–∞–¥—Ü—ñ', 'info');
        }

        async function checkContract() {
            log('üîµ –ü–æ—á–∞—Ç–æ–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —á–µ—Ä–µ–∑ Etherscan API...', 'info');
            
            try {
                // Check if contract exists using Etherscan API
                log('üì° –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É...', 'info');
                
                const codeUrl = `https://api-sepolia.etherscan.io/api?module=proxy&action=eth_getCode&address=${CONFIG.STAKING_ADDRESS}&tag=latest`;
                const codeResponse = await fetch(codeUrl);
                const codeData = await codeResponse.json();
                
                if (codeData.error) {
                    log(`‚ùå API –ø–æ–º–∏–ª–∫–∞: ${codeData.error.message}`, 'error');
                    return;
                }
                
                const code = codeData.result;
                
                if (code === '0x' || code === '0x0') {
                    log('‚ùå –ö–û–ù–¢–†–ê–ö–¢ –ù–ï –ó–ù–ê–ô–î–ï–ù–û!', 'error');
                    log('‚ö†Ô∏è –ó–∞ –∞–¥—Ä–µ—Å–æ—é 0x47B302F... –Ω–µ–º–∞—î –∫–æ–¥—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É', 'error');
                    log('üí° –ú–æ–∂–ª–∏–≤–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ –∑–∞–¥–µ–ø–ª–æ—î–Ω–æ –∞–±–æ –∞–¥—Ä–µ—Å–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞', 'error');
                    
                    const etherscanLink = `https://sepolia.etherscan.io/address/${CONFIG.STAKING_ADDRESS}`;
                    log(`üîó <a href="${etherscanLink}" target="_blank">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞ Etherscan ‚Üí</a>`, 'info');
                    return;
                }
                
                log('‚úÖ –ö–û–ù–¢–†–ê–ö–¢ –ó–ù–ê–ô–î–ï–ù–û!', 'success');
                log(`üìù –†–æ–∑–º—ñ—Ä –∫–æ–¥—É: ${(code.length - 2) / 2} –±–∞–π—Ç`, 'success');
                
                // Try to call totalStaked using Etherscan API
                log('üì° –í–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó totalStaked()...', 'info');
                
                // Function signature for totalStaked(): 0x817b1cd2
                const callUrl = `https://api-sepolia.etherscan.io/api?module=proxy&action=eth_call&to=${CONFIG.STAKING_ADDRESS}&data=0x817b1cd2&tag=latest`;
                
                const callResponse = await fetch(callUrl);
                const callData = await callResponse.json();
                
                if (callData.error) {
                    log(`‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∞ –≤–∏–∫–ª–∏–∫—É: ${callData.error.message}`, 'error');
                    log('üí° –ú–æ–∂–ª–∏–≤–æ —Ñ—É–Ω–∫—Ü—ñ—è totalStaked() –≤—ñ–¥—Å—É—Ç–Ω—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ', 'error');
                } else {
                    const result = callData.result;
                    const valueHex = result.replace('0x', '');
                    const valueDec = parseInt(valueHex, 16);
                    
                    log(`‚úÖ totalStaked (raw): ${valueDec}`, 'success');
                    
                    // Convert from 6 decimals
                    const valueFormatted = valueDec / 1000000;
                    log(`‚úÖ totalStaked: ${valueFormatted} —Ç–æ–∫–µ–Ω—ñ–≤`, 'success');
                    
                    if (valueDec === 0) {
                        log('‚ö†Ô∏è –ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∑–∞—Å—Ç–µ–π–∫–∞–Ω–∏—Ö —Ç–æ–∫–µ–Ω—ñ–≤ (—Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É)', 'error');
                    } else {
                        const arubPrice = 81.22;
                        const usdValue = valueFormatted * arubPrice;
                        log(`üíµ –í–∞—Ä—Ç—ñ—Å—Ç—å: $${usdValue.toLocaleString('en-US', { maximumFractionDigits: 2 })}`, 'success');
                    }
                }
                
                // Show Etherscan link
                const etherscanLink = `https://sepolia.etherscan.io/address/${CONFIG.STAKING_ADDRESS}`;
                log(`üîó <a href="${etherscanLink}" target="_blank">–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –Ω–∞ Etherscan ‚Üí</a>`, 'info');
                
            } catch (error) {
                log(`‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}`, 'error');
                console.error('Full error:', error);
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            log('üöÄ –°—Ç–æ—Ä—ñ–Ω–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞', 'success');
            log('üí° –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç" –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏', 'info');
            log('üí° –ê–±–æ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ Etherscan –¥–ª—è —Ä—É—á–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏', 'info');
        });
    </script>
</body>
</html>
